import{u as j,r as b,j as e,H as N,L as h}from"./app-1ReD06DP.js";import{A as _,B as y}from"./AuthenticatedLayout-CEZ7XWFM.js";import{C,a as w,b as F,c as B,d as D}from"./card-DSCkEG9B.js";import{B as m,I as n}from"./index-C5WthPdL.js";import{L as i}from"./label-BA-S9Txa.js";import{I as o}from"./InputError-C6K29MHn.js";import{A as k}from"./arrow-left-BPdNyevk.js";import{U as A}from"./upload-imTARLl6.js";function H({book:a}){const{data:l,setData:r,post:x,processing:g,errors:t}=j({title:a.title||"",description:a.description||"",author:a.author||"",issue_date:a.issue_date||"",return_date:a.return_date||"",status:a.status||"wishlist",current_page:a.current_page||0,total_pages:a.total_pages||"",cover_image:null,_method:"PUT"}),[c,p]=b.useState(a.cover_image?`/storage/${a.cover_image}`:null),f=s=>{const d=s.target.files[0];if(d){r("cover_image",d);const u=new FileReader;u.onloadend=()=>{p(u.result)},u.readAsDataURL(d)}},v=s=>{s.preventDefault(),x(route("books.update",a.id),{forceFormData:!0})};return e.jsxs(_,{children:[e.jsx(N,{title:`Edit ${a.title}`}),e.jsxs("div",{className:"max-w-2xl mx-auto space-y-4",children:[e.jsx(h,{href:route("books.show",a.id),children:e.jsxs(m,{variant:"ghost",size:"sm",className:"text-rose-600 hover:text-rose-700 hover:bg-rose-50",children:[e.jsx(k,{className:"h-4 w-4 mr-2"}),"Back to Book"]})}),e.jsxs(C,{className:"border-rose-100",children:[e.jsxs(w,{children:[e.jsx(F,{className:"text-2xl",children:"Edit Book"}),e.jsx(B,{children:"Update book information and track your reading progress"})]}),e.jsx(D,{children:e.jsxs("form",{onSubmit:v,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"cover_image",children:"Book Cover (Optional)"}),e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx("div",{className:"w-40 aspect-[2/3] rounded-lg bg-gradient-to-br from-slate-100 via-slate-50 to-rose-50 overflow-hidden flex items-center justify-center border-2 border-dashed border-gray-300",children:c?e.jsx("img",{src:c,alt:"Cover preview",className:"w-full h-full object-cover"}):e.jsxs("div",{className:"flex flex-col items-center justify-center p-4",children:[e.jsx(y,{className:"h-16 w-16 text-rose-300 mb-2"}),e.jsx("p",{className:"text-xs text-gray-500 text-center",children:"No image"})]})}),e.jsxs("div",{className:"w-full",children:[e.jsx("input",{type:"file",id:"cover_image",accept:"image/*",onChange:f,className:"hidden"}),e.jsxs("label",{htmlFor:"cover_image",className:"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-input bg-background hover:bg-accent hover:text-accent-foreground h-10 px-4 py-2 w-full cursor-pointer",children:[e.jsx(A,{className:"h-4 w-4"}),c?"Change Cover":"Upload Cover"]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2 text-center",children:"JPG or PNG, max 2MB"})]})]}),e.jsx(o,{message:t.cover_image})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"title",children:"Book Title *"}),e.jsx(n,{id:"title",value:l.title,onChange:s=>r("title",s.target.value),placeholder:"Enter book title",className:"focus:ring-rose-500",required:!0}),e.jsx(o,{message:t.title})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"author",children:"Author"}),e.jsx(n,{id:"author",value:l.author,onChange:s=>r("author",s.target.value),placeholder:"Author name",className:"focus:ring-rose-500"}),e.jsx(o,{message:t.author})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"description",children:"Description"}),e.jsx("textarea",{id:"description",value:l.description,onChange:s=>r("description",s.target.value),placeholder:"Brief description or notes about the book",rows:4,className:"flex w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-rose-500 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"}),e.jsx(o,{message:t.description})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"status",children:"Reading Status"}),e.jsxs("select",{id:"status",value:l.status,onChange:s=>r("status",s.target.value),className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-rose-500 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",children:[e.jsx("option",{value:"wishlist",children:"Wishlist"}),e.jsx("option",{value:"active",children:"Currently Reading"}),e.jsx("option",{value:"completed",children:"Completed"})]}),e.jsx(o,{message:t.status})]}),e.jsxs("div",{className:"grid sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"current_page",children:"Current Page"}),e.jsx(n,{type:"number",id:"current_page",value:l.current_page,onChange:s=>r("current_page",s.target.value),placeholder:"0",min:"0",className:"focus:ring-rose-500"}),e.jsx(o,{message:t.current_page})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"total_pages",children:"Total Pages"}),e.jsx(n,{type:"number",id:"total_pages",value:l.total_pages,onChange:s=>r("total_pages",s.target.value),placeholder:"e.g., 350",min:"1",className:"focus:ring-rose-500"}),e.jsx(o,{message:t.total_pages})]})]}),e.jsxs("div",{className:"grid sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"issue_date",children:"Issue Date"}),e.jsx(n,{type:"date",id:"issue_date",value:l.issue_date,onChange:s=>r("issue_date",s.target.value),className:"focus:ring-rose-500"}),e.jsx(o,{message:t.issue_date})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"return_date",children:"Return Date"}),e.jsx(n,{type:"date",id:"return_date",value:l.return_date,onChange:s=>r("return_date",s.target.value),className:"focus:ring-rose-500"}),e.jsx(o,{message:t.return_date})]})]}),e.jsxs("div",{className:"flex flex-col-reverse sm:flex-row gap-3 pt-4",children:[e.jsx(h,{href:route("books.show",a.id),className:"flex-1",children:e.jsx(m,{type:"button",variant:"outline",className:"w-full",children:"Cancel"})}),e.jsx(m,{type:"submit",disabled:g,className:"flex-1 bg-gradient-to-r from-rose-600 to-rose-500 hover:from-rose-700 hover:to-rose-600",children:g?"Saving Changes...":"Save Changes"})]})]})})]})]})]})}export{H as default};
