import{u as b,r as N,j as e,H as y,L as x}from"./app-Biz2H7mj.js";import{A as w,B as _}from"./AuthenticatedLayout-EHPt9SyG.js";import{C,a as I,b as P,c as F,d as D}from"./card-wuFFTpb7.js";import{B as m,I as o}from"./index-Dg7t1e_I.js";import{L as i}from"./label-CziBufBA.js";import{I as l}from"./InputError-CYfyCee4.js";import{A}from"./arrow-left-D2Ec2JP3.js";import{U as G}from"./upload-CZjeWoti.js";function U({book:a}){const g=s=>s?/^\d{4}-\d{2}-\d{2}$/.test(s)?s:s.split("T")[0]:"",{data:n,setData:r,post:p,processing:h,errors:t}=b({title:a.title||"",description:a.description||"",author:a.author||"",library_name:a.library_name||"",note:a.note||"",duration:a.duration||"",issue_date:g(a.issue_date),return_date:g(a.return_date),status:a.status||"wishlist",current_page:a.current_page||0,total_pages:a.total_pages||"",cover_image:null,_method:"PUT"}),[d,v]=N.useState(a.cover_image?`/storage/${a.cover_image}`:null),f=s=>{const c=s.target.files[0];if(c){r("cover_image",c);const u=new FileReader;u.onloadend=()=>{v(u.result)},u.readAsDataURL(c)}},j=s=>{s.preventDefault(),p(route("books.update",a.id),{forceFormData:!0})};return e.jsxs(w,{children:[e.jsx(y,{title:`Edit ${a.title}`}),e.jsxs("div",{className:"max-w-2xl mx-auto space-y-4",children:[e.jsxs("div",{className:"relative overflow-hidden rounded-xl bg-gradient-to-br from-amber-600 via-orange-600 to-red-600 p-6 shadow-xl",children:[e.jsx("div",{className:"absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAiIGhlaWdodD0iNjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PHBhdHRlcm4gaWQ9ImdyaWQiIHdpZHRoPSI2MCIgaGVpZ2h0PSI2MCIgcGF0dGVyblVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHBhdGggZD0iTSAxMCAwIEwgMCAwIDAgMTAiIGZpbGw9Im5vbmUiIHN0cm9rZT0id2hpdGUiIHN0cm9rZS1vcGFjaXR5PSIwLjEiIHN0cm9rZS13aWR0aD0iMSIvPjwvcGF0dGVybj48L2RlZnM+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0idXJsKCNncmlkKSIvPjwvc3ZnPg==')] opacity-30"}),e.jsxs("div",{className:"relative flex items-center gap-4",children:[e.jsx(x,{href:route("books.show",a.id),children:e.jsxs(m,{variant:"ghost",size:"sm",className:"text-white hover:bg-white/20",children:[e.jsx(A,{className:"h-4 w-4 mr-2"}),"Back"]})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"text-2xl font-bold text-white mb-1",children:"Edit Book"}),e.jsx("p",{className:"text-sm text-orange-100",children:"Update book information"})]})]})]}),e.jsxs(C,{className:"border-0 shadow-lg",children:[e.jsxs(I,{children:[e.jsx(P,{className:"text-2xl",children:"Edit Book"}),e.jsx(F,{children:"Update book information and track your reading progress"})]}),e.jsx(D,{children:e.jsxs("form",{onSubmit:j,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"cover_image",children:"Book Cover (Optional)"}),e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx("div",{className:"w-40 aspect-[2/3] rounded-lg bg-gradient-to-br from-slate-100 via-slate-50 to-green-50 overflow-hidden flex items-center justify-center border-2 border-dashed border-gray-300",children:d?e.jsx("img",{src:d,alt:"Cover preview",className:"w-full h-full object-cover"}):e.jsxs("div",{className:"flex flex-col items-center justify-center p-4",children:[e.jsx(_,{className:"h-16 w-16 text-green-300 mb-2"}),e.jsx("p",{className:"text-xs text-gray-500 text-center",children:"No image"})]})}),e.jsxs("div",{className:"w-full",children:[e.jsx("input",{type:"file",id:"cover_image",accept:"image/*",onChange:f,className:"hidden"}),e.jsxs("label",{htmlFor:"cover_image",className:"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-input bg-background hover:bg-accent hover:text-accent-foreground h-10 px-4 py-2 w-full cursor-pointer",children:[e.jsx(G,{className:"h-4 w-4"}),d?"Change Cover":"Upload Cover"]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2 text-center",children:"JPG or PNG, max 20MB"})]})]}),e.jsx(l,{message:t.cover_image})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"title",children:"Book Title *"}),e.jsx(o,{id:"title",value:n.title,onChange:s=>r("title",s.target.value),placeholder:"Enter book title",className:"focus:ring-green-500",required:!0}),e.jsx(l,{message:t.title})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"author",children:"Author"}),e.jsx(o,{id:"author",value:n.author,onChange:s=>r("author",s.target.value),placeholder:"Author name",className:"focus:ring-green-500"}),e.jsx(l,{message:t.author})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"library_name",children:"Library Name"}),e.jsx(o,{id:"library_name",value:n.library_name,onChange:s=>r("library_name",s.target.value),placeholder:"e.g. Central Library",className:"focus:ring-green-500"}),e.jsx(l,{message:t.library_name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"duration",children:"Duration (e.g. 5h 30m)"}),e.jsx(o,{id:"duration",value:n.duration,onChange:s=>r("duration",s.target.value),placeholder:"Enter duration",className:"focus:ring-green-500"}),e.jsx(l,{message:t.duration})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"description",children:"Description"}),e.jsx("textarea",{id:"description",value:n.description,onChange:s=>r("description",s.target.value),placeholder:"Brief description or notes about the book",rows:4,className:"flex w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-green-500 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"}),e.jsx(l,{message:t.description})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"note",children:"Private Notes"}),e.jsx("textarea",{id:"note",value:n.note,onChange:s=>r("note",s.target.value),placeholder:"Add any private notes here...",rows:3,className:"flex w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-green-500 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"}),e.jsx(l,{message:t.note})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"status",children:"Reading Status"}),e.jsxs("select",{id:"status",value:n.status,onChange:s=>r("status",s.target.value),className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-green-500 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",children:[e.jsx("option",{value:"wishlist",children:"Wishlist"}),e.jsx("option",{value:"active",children:"Currently Reading"}),e.jsx("option",{value:"completed",children:"Completed"})]}),e.jsx(l,{message:t.status})]}),e.jsxs("div",{className:"grid sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"current_page",children:"Current Page"}),e.jsx(o,{type:"number",id:"current_page",value:n.current_page,onChange:s=>r("current_page",s.target.value),placeholder:"0",min:"0",className:"focus:ring-green-500"}),e.jsx(l,{message:t.current_page})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"total_pages",children:"Total Pages"}),e.jsx(o,{type:"number",id:"total_pages",value:n.total_pages,onChange:s=>r("total_pages",s.target.value),placeholder:"e.g., 350",min:"1",className:"focus:ring-green-500"}),e.jsx(l,{message:t.total_pages})]})]}),e.jsxs("div",{className:"grid sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"issue_date",children:"Issue Date"}),e.jsx(o,{type:"date",id:"issue_date",value:n.issue_date,onChange:s=>r("issue_date",s.target.value),className:"focus:ring-green-500"}),e.jsx(l,{message:t.issue_date})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"return_date",children:"Return Date"}),e.jsx(o,{type:"date",id:"return_date",value:n.return_date,onChange:s=>r("return_date",s.target.value),className:"focus:ring-green-500"}),e.jsx(l,{message:t.return_date})]})]}),e.jsxs("div",{className:"flex flex-col-reverse sm:flex-row gap-3 pt-4",children:[e.jsx(x,{href:route("books.show",a.id),className:"flex-1",children:e.jsx(m,{type:"button",variant:"outline",className:"w-full",children:"Cancel"})}),e.jsx(m,{type:"submit",disabled:h,className:"flex-1 bg-gradient-to-r from-amber-600 to-orange-600 hover:from-amber-700 hover:to-orange-700",children:h?"Saving Changes...":"Save Changes"})]})]})})]})]})]})}export{U as default};
