import{u as F,r as V,j as e,H as B,L as S,a as u}from"./app-6yrd233J.js";import{c as a,A as E,B as U,U as W,L as q}from"./AuthenticatedLayout-xaAt19pC.js";import{C as j,d as C}from"./card-B9hUupT2.js";import{B as l,I as d}from"./index-DDCrsv5Q.js";import{L as c}from"./label-CHpjk7_y.js";import{H as D,D as O,a as J,b as Q,c as X,d as K}from"./dialog-BE1WEVqy.js";import{I as f}from"./InputError-DS8GDm7r.js";import{A as Y}from"./arrow-left-4cptZ0Mn.js";import{C as I}from"./calendar-DwJ4iUvP.js";import{T as ee,P as se}from"./trending-up-CIM9jZdL.js";const te=a("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);const M=a("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);const P=a("CirclePlay",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);const N=a("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);const ae=a("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);const re=a("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);const le=a("StickyNote",[["path",{d:"M16 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V8Z",key:"qazsjp"}],["path",{d:"M15 3v4a2 2 0 0 0 2 2h4",key:"40519r"}]]);const H=a("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);function je({book:s}){const{data:i,setData:n,post:L,processing:y,errors:o,reset:A}=F({start_datetime:"",end_datetime:"",pages_from:s.current_page||0,pages_to:"",notes:""}),[T,v]=V.useState(!1),Z=()=>{confirm("Are you sure you want to delete this book? This action cannot be undone.")&&u.delete(route("books.destroy",s.id))},x=t=>{u.patch(route("books.update",s.id),{title:s.title,status:t},{preserveScroll:!0,preserveState:!0})},R=t=>{t.preventDefault(),L(route("sessions.store",s.id),{onSuccess:()=>{v(!1),A()}})},G=t=>{confirm("Delete this reading session?")&&u.delete(route("sessions.destroy",t),{preserveScroll:!0})},g=t=>t?new Date(t).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"}):"Not set",w=t=>t?new Date(t).toLocaleString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"}):"",$=(t,m)=>{const k=new Date(m)-new Date(t),p=Math.floor(k/6e4),_=Math.floor(p/60),z=p%60;return _>0?`${_}h ${z}m`:`${p}m`},b=s.status==="active"&&s.return_date&&new Date(s.return_date)<new Date,r=(t=>{const m={wishlist:{color:"purple",icon:D,label:"Wishlist",gradient:"from-purple-600 to-pink-600",bg:"bg-purple-100",text:"text-purple-700",border:"border-purple-200"},active:{color:"blue",icon:P,label:"Currently Reading",gradient:"from-blue-600 to-cyan-600",bg:"bg-blue-100",text:"text-blue-700",border:"border-blue-200"},completed:{color:"green",icon:M,label:"Completed",gradient:"from-emerald-600 to-teal-600",bg:"bg-emerald-100",text:"text-emerald-700",border:"border-emerald-200"}};return m[t]||m.wishlist})(s.status),h=r.icon;return e.jsxs(E,{children:[e.jsx(B,{title:s.title}),e.jsxs("div",{className:"max-w-4xl mx-auto space-y-4 pb-20",children:[e.jsxs("div",{className:`relative overflow-hidden rounded-xl bg-gradient-to-br ${r.gradient} p-6 shadow-xl`,children:[e.jsx("div",{className:"absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAiIGhlaWdodD0iNjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PHBhdHRlcm4gaWQ9ImdyaWQiIHdpZHRoPSI2MCIgaGVpZ2h0PSI2MCIgcGF0dGVyblVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHBhdGggZD0iTSAxMCAwIEwgMCAwIDAgMTAiIGZpbGw9Im5vbmUiIHN0cm9rZT0id2hpdGUiIHN0cm9rZS1vcGFjaXR5PSIwLjEiIHN0cm9rZS13aWR0aD0iMSIvPjwvcGF0dGVybj48L2RlZnM+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0idXJsKCNncmlkKSIvPjwvc3ZnPg==')] opacity-30"}),e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx(S,{href:route("books.index"),children:e.jsxs(l,{variant:"ghost",size:"sm",className:"text-white hover:bg-white/20",children:[e.jsx(Y,{className:"h-4 w-4 mr-2"}),"Back"]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(S,{href:route("books.edit",s.id),children:e.jsxs(l,{size:"sm",className:"bg-white/20 text-white hover:bg-white/30 border-white/30",children:[e.jsx(re,{className:"h-4 w-4 mr-2"}),"Edit"]})}),e.jsxs(l,{size:"sm",className:"bg-red-500/80 text-white hover:bg-red-600 border-red-400/30",onClick:Z,children:[e.jsx(H,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:s.title}),e.jsxs("div",{className:"flex items-center gap-2 text-white/90",children:[e.jsx(h,{className:"h-5 w-5"}),e.jsx("span",{className:"font-semibold",children:r.label})]})]})]})]}),b&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 flex items-center gap-3 text-red-700",children:[e.jsx(te,{className:"h-5 w-5"}),e.jsxs("span",{className:"font-medium text-sm",children:["This book is Overdue! It was due on ",g(s.return_date),"."]})]}),e.jsx(j,{className:"border-green-100",children:e.jsxs(C,{className:"p-4 sm:p-6",children:[e.jsxs("div",{className:"flex flex-col md:grid md:grid-cols-[300px_1fr] gap-4 md:gap-6",children:[e.jsxs("div",{className:"flex md:block gap-4",children:[e.jsx("div",{className:"w-24 md:w-full aspect-[3/4] rounded-lg bg-gradient-to-br from-green-100 to-green-50 overflow-hidden relative group flex-shrink-0",children:s.cover_image?e.jsx("img",{src:`/storage/${s.cover_image}`,alt:s.title,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(U,{className:"h-12 md:h-24 w-12 md:w-24 text-green-300"})})}),e.jsxs("div",{className:"md:hidden flex-1 min-w-0",children:[e.jsx("h1",{className:"text-xl font-bold text-gray-900 mb-2 line-clamp-2",children:s.title}),e.jsxs("div",{className:`inline-flex items-center gap-2 px-3 py-1.5 rounded-full bg-gradient-to-r ${r.gradient} text-white text-xs`,children:[e.jsx(h,{className:"h-3 w-3"}),e.jsx("span",{className:"font-medium",children:r.label})]})]})]}),e.jsxs("div",{className:"space-y-3 sm:space-y-6",children:[e.jsxs("div",{className:"hidden md:block",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-3",children:s.title}),e.jsxs("div",{className:`inline-flex items-center gap-2 px-4 py-2 rounded-full bg-gradient-to-r ${r.gradient} text-white`,children:[e.jsx(h,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium",children:r.label})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[s.author&&e.jsxs("div",{className:"flex items-center gap-2 p-2 rounded-lg bg-gray-50",children:[e.jsx(W,{className:"h-4 w-4 text-green-600 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Author"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:s.author})]})]}),s.library_name&&e.jsxs("div",{className:"flex items-center gap-2 p-2 rounded-lg bg-gray-50",children:[e.jsx(q,{className:"h-4 w-4 text-green-600 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Library"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:s.library_name})]})]}),s.duration&&e.jsxs("div",{className:"flex items-center gap-2 p-2 rounded-lg bg-gray-50",children:[e.jsx(N,{className:"h-4 w-4 text-green-600 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Duration"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:s.duration})]})]}),s.issue_date&&e.jsxs("div",{className:"flex items-center gap-2 p-2 rounded-lg bg-gray-50",children:[e.jsx(I,{className:"h-4 w-4 text-green-600 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Issue Date"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:g(s.issue_date)})]})]}),s.return_date&&e.jsxs("div",{className:"flex items-center gap-2 p-2 rounded-lg bg-gray-50",children:[e.jsx(I,{className:"h-4 w-4 text-green-600 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Return Date"}),e.jsx("p",{className:`text-sm font-medium ${b?"text-red-600 font-bold":"text-gray-900"}`,children:g(s.return_date)})]})]})]}),s.description&&e.jsxs("div",{className:"p-3 rounded-lg bg-gray-50",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ae,{className:"h-4 w-4 text-green-600"}),e.jsx("p",{className:"text-xs font-medium text-muted-foreground",children:"Description"})]}),e.jsx("p",{className:"text-sm text-gray-900 whitespace-pre-wrap",children:s.description})]}),s.note&&e.jsxs("div",{className:"p-3 rounded-lg bg-gray-50",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(le,{className:"h-4 w-4 text-green-600"}),e.jsx("p",{className:"text-xs font-medium text-muted-foreground",children:"Notes"})]}),e.jsx("p",{className:"text-sm text-gray-900 whitespace-pre-wrap",children:s.note})]})]})]}),s.total_pages>0&&e.jsxs("div",{className:"mt-6 pt-6 border-t border-green-100",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(ee,{className:"h-5 w-5 text-green-600"}),e.jsx("h3",{className:"font-semibold text-gray-900",children:"Reading Progress"})]}),e.jsxs("div",{className:"space-y-1.5 sm:space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("span",{className:"text-muted-foreground",children:[s.current_page," of ",s.total_pages," pages"]}),e.jsxs("span",{className:"font-semibold text-green-600",children:[s.progress_percentage||0,"%"]})]}),e.jsx("div",{className:"h-3 bg-green-100 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-green-600 to-green-400 transition-all duration-500",style:{width:`${s.progress_percentage||0}%`}})})]})]}),e.jsxs("div",{className:"mt-6 pt-6 border-t border-green-100",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsxs("button",{onClick:()=>x("wishlist"),className:`flex-1 flex items-center justify-center gap-2 px-4 py-3 rounded-lg font-medium transition-all ${s.status==="wishlist"?"bg-gradient-to-r from-green-600 to-green-500 text-white shadow-md":"border-2 border-green-200 text-green-700 hover:bg-green-50"}`,children:[e.jsx(D,{className:`h-4 w-4 ${s.status==="wishlist"?"fill-white":""}`}),e.jsx("span",{className:"text-sm",children:"Wishlist"})]}),e.jsxs("button",{onClick:()=>x("active"),className:`flex-1 flex items-center justify-center gap-2 px-4 py-3 rounded-lg font-medium transition-all ${s.status==="active"?"bg-gradient-to-r from-green-600 to-green-500 text-white shadow-md":"border-2 border-green-200 text-green-700 hover:bg-green-50"}`,children:[e.jsx(P,{className:`h-4 w-4 ${s.status==="active"?"fill-white":""}`}),e.jsx("span",{className:"text-sm",children:"Reading"})]}),e.jsxs("button",{onClick:()=>x("completed"),className:`flex-1 flex items-center justify-center gap-2 px-4 py-3 rounded-lg font-medium transition-all ${s.status==="completed"?"bg-gradient-to-r from-blue-600 to-blue-500 text-white shadow-md":"border-2 border-blue-200 text-blue-700 hover:bg-blue-50"}`,children:[e.jsx(M,{className:`h-4 w-4 ${s.status==="completed"?"fill-white":""}`}),e.jsx("span",{className:"text-sm",children:"Completed"})]})]})]})]})}),e.jsxs("div",{className:"space-y-2 sm:space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Reading Sessions"}),e.jsxs(O,{open:T,onOpenChange:v,children:[e.jsx(J,{asChild:!0,children:e.jsxs(l,{className:"bg-gradient-to-r from-green-600 to-green-500 hover:from-green-700 hover:to-green-600 text-white",children:[e.jsx(se,{className:"h-4 w-4 mr-2"}),"Log Session"]})}),e.jsxs(Q,{className:"sm:max-w-md",children:[e.jsx(X,{children:e.jsx(K,{children:"Log Reading Session"})}),e.jsx("div",{className:"py-6",children:e.jsxs("form",{onSubmit:R,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"start_datetime",children:"Start Time"}),e.jsx(d,{id:"start_datetime",type:"datetime-local",value:i.start_datetime,onChange:t=>n("start_datetime",t.target.value),required:!0,className:"focus:ring-green-500"}),e.jsx(f,{message:o.start_datetime})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"end_datetime",children:"End Time"}),e.jsx(d,{id:"end_datetime",type:"datetime-local",value:i.end_datetime,onChange:t=>n("end_datetime",t.target.value),required:!0,className:"focus:ring-green-500"}),e.jsx(f,{message:o.end_datetime})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"pages_from",children:"From Page"}),e.jsx(d,{id:"pages_from",type:"number",value:i.pages_from,onChange:t=>n("pages_from",t.target.value),className:"focus:ring-green-500"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"pages_to",children:"To Page"}),e.jsx(d,{id:"pages_to",type:"number",value:i.pages_to,onChange:t=>n("pages_to",t.target.value),className:"focus:ring-green-500"}),e.jsx(f,{message:o.pages_to})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"notes",children:"Session Notes"}),e.jsx(d,{id:"notes",value:i.notes,onChange:t=>n("notes",t.target.value),placeholder:"What happened in this session?",className:"focus:ring-green-500"})]}),e.jsx(l,{type:"submit",className:"w-full bg-gradient-to-r from-green-600 to-green-500 hover:from-green-700 hover:to-green-600 text-white",disabled:y,children:y?"Saving...":"Save Session"})]})})]})]})]}),s.reading_sessions&&s.reading_sessions.length>0?e.jsx("div",{className:"space-y-2 sm:space-y-3",children:s.reading_sessions.map(t=>e.jsx(j,{className:"border-green-100 hover:border-green-200 transition-colors",children:e.jsxs("div",{className:"p-3 sm:p-4 flex items-start justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium text-gray-900",children:[e.jsx(N,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{children:w(t.start_datetime)}),e.jsx("span",{className:"text-muted-foreground",children:"-"}),e.jsx("span",{children:w(t.end_datetime)})]}),e.jsxs("div",{className:"text-xs text-muted-foreground flex gap-3",children:[e.jsxs("span",{className:"font-medium text-green-700 bg-green-50 px-2 py-0.5 rounded-full",children:["Duration: ",$(t.start_datetime,t.end_datetime)]}),t.pages_to&&e.jsxs("span",{children:["Pages ",t.pages_from||0," - ",t.pages_to]})]}),t.notes&&e.jsx("p",{className:"text-sm text-gray-600 mt-2",children:t.notes})]}),e.jsx(l,{variant:"ghost",size:"sm",className:"text-red-400 hover:text-red-600 hover:bg-red-50 -mt-1 -mr-2",onClick:()=>G(t.id),children:e.jsx(H,{className:"h-4 w-4"})})]})},t.id))}):e.jsx(j,{className:"border-dashed border-green-200 bg-green-50/50",children:e.jsxs(C,{className:"flex flex-col items-center justify-center py-8 text-center text-muted-foreground",children:[e.jsx(N,{className:"h-10 w-10 text-green-300 mb-2"}),e.jsx("p",{children:"No reading sessions yet."}),e.jsx("p",{className:"text-xs",children:"Log your reading time to track your progress!"})]})})]})]})]})}export{je as default};
